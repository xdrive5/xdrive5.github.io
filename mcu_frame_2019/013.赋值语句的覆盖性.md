# 第十三节：赋值语句的覆盖性



## 【13.1 什么是赋值语句的覆盖性？】

 ```a = b;```

上述代码，执行完这条赋值语句后，会把右边变量b的数值复制一份给左边变量a，a获得了跟b一样的数值，但是a原来自己的数值却丢失了，为什么会丢失？就是因为被b复制过来的新数据给覆盖了，这就是赋值语句的覆盖性。

### 【13.2 例程的分析和练习】

既然赋值语句有覆盖性的特点，那么如何让两个变量相互交换数值？假设a原来的数据是1，b原来的数据是5,交换数据后，a的数据应该变为5，b的数据应该变为1，怎么做？很多初学者刚看到这么简单的题目，会马上根据日常生活的思路，你把你的东西给我，我把我的东西给你，就两个步骤而已，看似很简单，现在按这个思路编写一段程序看看会出什么问题,代码如下：

```c
/* ---C语言学习区域的开始。-----------------------------------------------*/
void main()  //主函数 
{
  //定义的变量a被分配了1个字节的RAM空间，保存的数据被初始化成1。
  unsigned char a = 1;
  //定义的变量b被分配了1个字节的RAM空间，保存的数据被初始化成5。
  unsigned char b = 5;
  //第一步：为了交换，先把a的数赋值给b。
  b = a;
  //第二步：为了交换，再把b的数赋值给a。
  a = b;
  //把第1个数a发送到电脑端的串口助手软件上观察。
  View(a);
  //把第2个数b发送到电脑端的串口助手软件上观察。
  View(b);
  while (1) 
  {
  }
}
/*---C语言学习区域的结束。-----------------------------------------------*/
```

在电脑串口助手软件上观察到的程序执行现象如下：

> 开始...
> 
> 第1个数
> 
> 十进制:1
> 
> 十六进制:1
> 
> 二进制:1
> 
> 第2个数
> 
> 十进制:1
> 
> 十六进制:1
> 
> 二进制:1

分析：

第1个数a和第2个数b居然都是1！这不是我们想要的结果。我们要的交换结果是：交换后，a变为5，b变为1。在哪个环节出了问题？把镜头切换到上述代码的“第一步”和“第二步”，由于b的数据在执行完“第一步”后，b自己原来的数据5被覆盖丢失了变成新的数据1，接着执行“第二步”后，此时相当于把 b的新数据1赋值给a，并没有5！所以a和b的数据都是1，不能达到交换后“a为5，b为1”的目的。其实就是赋值语句的覆盖性在作祟。

上述交换数据的程序宣告失败！怎么办？既然赋值语句具有覆盖性，那么两变量想交换数据，就必须借助第三方变量来寄存，此时只需要多定义一个第三方变量t。正确的代码如下：

```c
/*---C语言学习区域的开始。-----------------------------------------------*/
void main()  //主函数 
{
  //定义的变量a被分配了1个字节的RAM空间，保存的数据被初始化成1。
  unsigned char a = 1;
  //定义的变量b被分配了1个字节的RAM空间，保存的数据被初始化成5。
  unsigned char b = 5;
  //定义一个第三方变量t，用来临时寄存数值。
  unsigned char t;
  //第一步：为了避免b的数据在赋值后被覆盖丢失，先寄存一份在第三方变量t那里。
  t = b;
  //第二步：把a的数赋值给b，b原来的数据虽然丢失，但是b在t变量那里有备份。
  b = a;
  //第三步：再把b在t变量里的备份赋值给a。注意，这里不能用b，因b原数据已被覆盖。
  a = t;
  //把第1个数a发送到电脑端的串口助手软件上观察。
  View(a);
  //把第2个数b发送到电脑端的串口助手软件上观察。
  View(b);
  while (1) 
  {
  }
}
/*---C语言学习区域的结束。-----------------------------------------------*/
```

在电脑串口助手软件上观察到的程序执行现象如下：

> 开始...
> 
> 第1个数
> 
> 十进制:5
> 
> 十六进制:5
> 
> 二进制:101
> 
> 第2个数
> 
> 十进制:1
> 
> 十六进制:1
> 
> 二进制:1

分析：

实验结果显示，两变量的数值交换成功。

### 【13.3 如何在单片机上练习本章节C语言程序？】

直接复制前面章节中第十一节的模板程序，练习代码时只需要更改“C语言学习区域”的代码就可以了，其它部分的代码不要动。编译后，把程序下载进带串口的51学习板，通过电脑端的串口助手软件就可以观察到不同的变量数值，详细方法请看第十一节内容。

## [◀回到目录](https://xdrive5.github.io/mcu_frame_2019/000.目录)

上一篇：[012.变量的定义和赋值](https://xdrive5.github.io/mcu_frame_2019/012.变量的定义和赋值)

下一篇：[014.二进制与字节单位，以及常用三种变量的取值范围](https://xdrive5.github.io/mcu_frame_2019/014.二进制与字节单位，以及常用三种变量的取值范围)
